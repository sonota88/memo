= 開発全般
:toc:



== OOP

- デメテルの法則

=== 継承＞is-a

『Effective Java 第2版』
項目16 継承よりコンポジションを選ぶ

> 継承は、サブクラスが本当にスーパークラスのサブタイプ（subtype）である場合だけ適切です。
> 言い換えれば、クラス B は、クラス A との間に「is-a」関係が存在している場合にだけ、クラス A を拡張すべきです。
> クラス B にクラス A を拡張させたいならば、「すべての B は本当に A であるか」を自問してください。
> この質問に本当に「はい」と答えられないならば、 B は A を拡張すべきではありません。

---

link:https://jp.quora.com/%E7%B6%99%E6%89%BF%E3%81%A7%E6%B6%88%E8%80%97%E3%81%97%E3%81%A6%E3%81%84%E3%81%BE%E3%81%9B%E3%82%93%E3%81%8B-%E3%81%A8%E3%81%8B-%E5%B7%AE%E5%88%86%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0[「継承で消耗していませんか」とか「差分プログラミングはバッドプラクティス」のようにオブジェクト指向プログラミングの主要素である継承は最近評判が悪いようですが、もう使わないほうが良いのですか？ - Quora]





== テスト

=== 実装の詳細ではなく仕様に対してテストする

link:https://ja.wikisource.org/wiki/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9E%E3%81%8C%E7%9F%A5%E3%82%8B%E3%81%B9%E3%81%8D97%E3%81%AE%E3%81%93%E3%81%A8/%E5%81%B6%E7%84%B6%E3%81%AE%E4%BB%95%E6%A7%98%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%8F%E6%9C%AC%E7%89%A9%E3%81%AE%E4%BB%95%E6%A7%98%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E6%9B%B8%E3%81%8F[プログラマが知るべき97のこと/偶然の仕様ではなく本物の仕様のためのテストを書く - Wikisource]

---

link:https://gihyo.jp/article/2024/01/automated-test-and-tdd[保守しやすく変化に強いソフトウェアを支える柱　自動テストとテスト駆動開発、その全体像 ～Software Design 2022年3月号「そろそろはじめるテスト駆動開発」より | gihyo.jp]

> テスト対象の構造に強く依存したテストを書かないように注意しないと、自動テストと実装コードとの結合度が高まる傾向があります。これを構造的結合と言います。構造的結合の度合いが高いテストを書いてしまうと、実装の変更や改善の際にテストコードのメンテナンスも必要となり、改善の足かせになってしまうことが多いです。

---

link:https://book.mynavi.jp/ec/products/detail/id=134252[単体テストの考え方/使い方 | マイナビブックス]

* 4.1.3 何が偽陽性（false positive）を引き起こすのか？
** p104 「テスト・コードがテスト対象となるコードの詳細と深く結び付くと、リファクタリングへの耐性がなくなる」
* 4.1.4 実装の詳細ではなく、最終的な結果を確認する
* 4.4.4 極端な例 #3: 壊れやすいテスト
* 4.4.5 理想的なテストに関する結論
** p121 「しかしながら、現実において、リファクタリングへの耐性を犠牲にすることはできません。
   なぜなら、リファクタリングへの耐性は可能な限り備えなくてはならない性質だからです。」
* 4.5.2 ブラック・ボックス・テストとホワイト・ボックス・テスト

=== テストダブル

* link:https://gihyo.jp/dev/serial/01/savanna-letter/0006[第6回　自動テストのサイズダウン戦略 ～テストダブルを作る前に考えるべきこと～ | gihyo.jp]
* link:https://ajito.fm/6/[ajitofm 6: Worse is Better] +
** 19:30〜


=== テストサイズ

* link:https://gihyo.jp/dev/serial/01/savanna-letter/0006[第6回　自動テストのサイズダウン戦略 ～テストダブルを作る前に考えるべきこと～ | gihyo.jp]
* link:https://www.youtube.com/watch?v=nERe7yNgeVU[Qiita Conference 2023 Day1 - YouTube]
** 2:17:50〜 自動テストとCIにフィットする明確なテスト分類基準




== アジャイル開発

=== ベロシティ

link:https://www.infoq.com/jp/news/2014/04/concerns-velocity-improvement/[チームの改善のためにベロシティを計測することへの懸念]
（からの孫引き）

> ベロシティは計測器であって調整ノブではありません。




=== 雑多

Robert C. Martin 『Clean Agile 基本に立ち戻れ』 p35

> アジャイル開発とは、フィードバック駆動のアプローチのことである。


+++
<hr />
+++

link:https://zenn.dev/ys/articles/391bde4fbd03d5[Clean Agile読書感想文]

> アジャイルを導入することによって、ボトルネックはビジネス側に移動します。





=== 例外

* 例外と表明の使い分け
** https://speakerdeck.com/twada/growing-reliable-code-phperkaigi-2022?slide=122
* 達人プログラマー（ピアソン版） p128
* link:https://gihyo.jp/book/2013/978-4-7741-5654-5[コーディングを支える技術――成り立ちから学ぶプログラミング作法] 第6章 エラー処理




== 設計

* 直交性
** 達人プログラマー（ピアソン版） p33
** link:https://qiita.com/hirokidaichi/items/61ad129eae43771d0fc3[スケールする要求を支える仕様の「意図」と「直交性」 #DDD - Qiita]
* 餅より米
** link:https://note.com/hal_sk/n/n916a422caafd[行政文書はMarkdownで管理できるか｜Hal Seki｜note]
*** 「餅から米を作る」
* 説明が少ない方が良い
* 不可逆な変更は先延ばしする
** 『クリーンアーキテクチャ』
* simple / easy
** https://speakerdeck.com/twada/growing-reliable-code-phperkaigi-2022?slide=133
** https://speakerdeck.com/twada/understanding-the-spiral-of-technologies?slide=32


=== 異常が見つかった場合は続行させず止めた方が良い

* もちろんトラブルが発生しないにこしたことはないが、
  発生した場合どちらの方がよりダメージを少なくできるか
* 二次被害を防ぐ

---

『達人プログラマー』（ピアソン版） p123, 124

> コード中に「あり得ない」と思われる何かが発生した場合、その時点でプログラムはもはや実行可能なものとはなっていない

> 何らかの疑いがあるのであれば、どのような場合でも速やかに停止させるのです。
> 通常の場合、障害を抱えて中途半端に動いているプログラムよりも死んだプログラムの方がダメージは少ないはずですから。




== 雑多

* よく言われること
** コードは書く時間よりも読む時間の方が長い
** まずは理想状態だったらどうするかを考え、そこから妥協して現実解に近づけていく



=== スコープ

第3回　スコープを意識したプログラミング―その2　変数のスコープ | gihyo.jp +
https://gihyo.jp/dev/serial/01/code/000302




=== コードの短さと可読性・理解の容易さ

コードの短さよりも可読性を重視する - Neo's World +
https://neos21.net/tech/programming/rather-readability-than-short-coding.html

命名の機会が少なくなる / デバッグが難しくなる

+++
<hr />
+++

Only My Rails Way +
https://zenn.dev/yukito0616/articles/d3b7032e9f1e90#%E3%83%9E%E3%82%A4%E3%83%B3%E3%83%89

> 「一見ダサいコード」は以外と読みやすい。

+++
<hr />
+++

O'Reilly Japan - リーダブルコード +
https://www.oreilly.co.jp/books/9784873115658/

p3

> 前者のほうが簡潔だ。でも、後者のほうが安心できる。
> 「簡潔」と「安心」はどちらが大切なことなんだろう?

> コードは他の人が最短時間で理解できるように書かなければいけない。

p4

> 1.3 小さなことは絶対にいいこと？

> でも、短ければいいってもんじゃない！

> コメントをつけると「コードが長く」なるけど、そのほうが理解しやすいこともある。

> コードは短くしたほうがいい。だけど、「理解するまでにかかる時間」を短くするほうが大切だ。




=== 三項演算子

O'Reilly Japan - リーダブルコード +
https://www.oreilly.co.jp/books/9784873115658/

p88-89

> 読みやすさの点から言うと、これには議論の余地がある。
> 支持者は、複数行が 1行にまとまるのでいいと言う。反対者は、読みにくいしデバッガでステップ実行するのが難しいと言う。

> 下手に省略せずにきちんと if/else 文を使えば、コードがより自然になる。

> 基本的には if/else を使おう。三項演算子はそれによって簡潔になるときにだけ使おう。




=== 早期リターンの乱用を避ける

早期リターンとApple SLLバグ | Ninton +
https://www.ninton.co.jp/archives/7903

ケントベック「Smalltalkベストプラクティスパターン」のガード節とアーリーリターン | Ninton +
https://www.ninton.co.jp/archives/8271

リーダブルコードをさらに改良する（アンチ・アーリーリターン） | Ninton +
https://www.ninton.co.jp/archives/8065




=== 大数の法則

Robert C. Martin 『Clean Agile 基本に立ち戻れ』 p78

> だが、あいまいでファジーな数字は美しいところもある。「大数の法則」と呼ばれるものだ。
> つまり、量を増やしていけば、ファジーなところが積分消去される！




=== 進捗率と完了

link:https://ledsun.hatenablog.com/entry/2019/05/08/101519[タスクの完了からはじめるプロジェクト進捗管理 - @ledsun blog]




=== 計画主義

『オブジェクト指向設計実践ガイド』 p26

> 1つ目は、前もって全体の詳細設計（BUFD: Big Up Front Design）をつくることにはまったく何の意味もないことです
> （だって、それが正しいことなどないのですから）。

---

『エクストリームプログラミング』（オーム社 2015）

第18章 テイラー主義とソフトウェア

> テイラー主義には好ましい効果もあるが、いくつかの深刻な欠点もある。
> これらの欠点は、以下の3つの単純化された仮定によるものだ。
> 
> * 通常、物事は計画どおりに進む
> * （略）


---

『リファクタリング プログラミングの体質改善テクニック』（ピアソン・エデュケーション 2000）

はじめに＞リファクタリングとは

> 「実装したあとで、設計を改善する」。これは奇妙な言い方でしょうか。
> 設計してから実装するというのが現在のソフトウェア業界の一般常識です。
> まず良い設計を行って、次にコーディングです。
> （略）

> リファクタリングはこの慣習に逆らうものです。
> （略）

> リファクタリングによって、仕事の作業配分が変わってきます。
> 設計の作業が、最初の工程で集中的に発生するというのではなく、
> 全行程を通じて継続して行われるようになります。
> システムを実際に構築することで、どのように設計を改善すべきかを把握できるようになります。
> （略）


=== カスタマイズをしない

* link:https://voluntas.medium.com/%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%82%92%E3%81%97%E3%81%AA%E3%81%84-c49b02772a17[カスタマイズをしない. ミドルウェアに対するカスタマイズについて | by V | Medium]


=== ガントチャート

* link:http://takaaki-kasai.blogspot.com/2013/02/blog-post.html[河西 高明 BLOG: ガントチャートを捨てろ]
* link:http://takaaki-kasai.blogspot.com/2013/02/throw-away-gantt-chart-02.html[河西 高明 BLOG: ガントチャートを捨てろ(2) バーンダウンチャートを使う]
* link:http://takaaki-kasai.blogspot.com/2013/03/throw-away-gantt-chart-03.html[河西 高明 BLOG: ガントチャートを捨てろ(3) バーンダウンチャートとバーンアップチャートを併記する]
* link:http://takaaki-kasai.blogspot.com/2013/03/throw-away-gantt-chart-04.html[河西 高明 BLOG: ガントチャートを捨てろ(4) タスクボードとバーンダウンチャート]
